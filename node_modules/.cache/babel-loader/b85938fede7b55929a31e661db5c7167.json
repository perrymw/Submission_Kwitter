{"ast":null,"code":"import _objectSpread from \"/Users/work/Documents/Second Quarter/SubmissionKwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { domain, jsonHeaders, handleJsonResponse } from \"./constants\"; // action types\n\nexport var GET_USERS = \"GET_USERS\";\nexport var GET_USERS_SUCCESS = \"GET_USERS_SUCCESS\";\nexport var GET_USERS_FAIL = \"GET_USERS_FAIL\";\nexport var GET_USER = \"GET_USER\";\nexport var GET_USER_SUCCESS = \"GET_USER_SUCCESS\";\nexport var GET_USER_FAIL = \"GET_USER_FAIL\";\nexport var GET_USER_PHOTO = \"GET_USER_PHOTO\";\nexport var GET_USER_PHOTO_SUCCESS = \"GET_USER_PHOTO_SUCCESS\";\nexport var GET_USER_PHOTO_FAIL = \"GET_USER_PHOTO_FAIL\";\nexport var CREATE_USER = \"CREATE_USER\";\nexport var CREATE_USER_SUCCESS = \"CREATE_USER_SUCCESS\";\nexport var CREATE_USER_FAIL = \"CREATE_USER_FAIL\";\nexport var UPDATE_USER_PHOTO = \"UPDATE_USER_PHOTO\";\nexport var UPDATE_USER_PHOTO_SUCCESS = \"UPDATE_USER_PHOTO_SUCCESS\";\nexport var UPDATE_USER_PHOTO_FAIL = \"UPDATE_USER_PHOTO_FAIL\";\nexport var UPDATE_USER = \"UPDATE_USER\";\nexport var UPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\";\nexport var UPDATE_USER_FAIL = \"UPDATE_USER_FAIL\";\nexport var DELETE_USER = \"DELETE_USER\";\nexport var DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\nexport var DELETE_USER_FAIL = \"DELETE_USER_FAIL\";\nvar url = domain + \"/users\"; // action creators\n\nvar getUsers = function getUsers() {\n  var userData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (dispatch) {\n    //userData is an object {limit, offset}\n    dispatch({\n      type: GET_USERS\n    });\n    return fetch(url).then(handleJsonResponse).then(function (result) {\n      console.log(result);\n      return dispatch({\n        type: GET_USERS_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: GET_USERS_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nvar getUser = function getUser(userData) {\n  return function (dispatch) {\n    //userData is an object {userId:useruserId}\n    dispatch({\n      type: GET_USER\n    });\n    return fetch(url + \"/\" + userData.userId).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: GET_USER_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: GET_USER_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nvar getUserPhoto = function getUserPhoto(userData) {\n  return function (dispatch, getState) {\n    //userData is an object {userId:useruserId}\n    dispatch({\n      type: GET_USER_PHOTO\n    });\n    var store = getState();\n    var userId = store.auth.login && store.auth.login.id || 5;\n    return fetch(url + \"/\".concat(userId, \"/picture\")).then(function (result) {\n      return dispatch({\n        type: GET_USER_PHOTO_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: GET_USER_PHOTO_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nvar createUser = function createUser(userData) {\n  return function (dispatch) {\n    console.log(\"CreateUser Action is Triggered\"); //userData is an object {username, displayname, password}\n\n    dispatch({\n      type: CREATE_USER\n    });\n    return fetch(url, {\n      method: \"POST\",\n      headers: jsonHeaders,\n      body: JSON.stringify(userData)\n    }).then(handleJsonResponse).then(function (result) {\n      console.log(result);\n      return dispatch({\n        type: CREATE_USER_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: CREATE_USER_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nvar updateUserPhoto = function updateUserPhoto(userData) {\n  return function (dispatch, getState) {\n    //userData is an object {userId:useruserId, picture}\n    dispatch({\n      type: UPDATE_USER_PHOTO\n    });\n    var userId = getState().auth.login.id;\n    var token = getState().auth.login.token;\n    return fetch(url + \"/\".concat(userId, \"/picture\"), {\n      method: \"PUT\",\n      headers: {\n        // 'Content-Type': 'multipart/form-data',\n        Authorization: \"Bearer \".concat(token)\n      },\n      body: userData.form\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: UPDATE_USER_PHOTO_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: UPDATE_USER_PHOTO_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nvar updateUser = function updateUser(userData) {\n  return function (dispatch) {\n    //userData is an object {limit, offset}\n    dispatch({\n      type: UPDATE_USER\n    });\n    return fetch(url + \"/\" + userData.userId, {\n      method: \"patch\",\n      headers: _objectSpread({}, jsonHeaders, {\n        Authorization: \"Bearer \".concat(userData.token)\n      }),\n      body: JSON.stringify(userData)\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: UPDATE_USER_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: UPDATE_USER_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nvar deleteUser = function deleteUser(userData) {\n  return function (dispatch) {\n    //userData is an object {limit, offset}\n    dispatch({\n      type: DELETE_USER\n    });\n    return fetch(url + \"/\" + userData.userId, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \".concat(userData.token)\n      }\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: DELETE_USER_SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: DELETE_USER_FAIL,\n        payload: err.message\n      }));\n    });\n  };\n};\n\nexport var getUsersAction = function getUsersAction(userData) {\n  return function (dispatch) {\n    return dispatch(getUsers(userData));\n  };\n};\nexport var getUserAction = function getUserAction(userData) {\n  return function (dispatch) {\n    return dispatch(getUser(userData));\n  };\n};\nexport var getUserPhotoAction = function getUserPhotoAction(userData) {\n  return function (dispatch) {\n    return dispatch(getUserPhoto(userData));\n  };\n};\nexport var createUserAction = function createUserAction(userData) {\n  return function (dispatch) {\n    return dispatch(createUser(userData));\n  };\n};\nexport var deleteUserAction = function deleteUserAction(userData) {\n  return function (dispatch) {\n    return dispatch(deleteUser(userData));\n  };\n};\nexport var updateUserPhotoAction = function updateUserPhotoAction(userData) {\n  return function (dispatch) {\n    return dispatch(updateUserPhoto(userData));\n  };\n};\nexport var updateUserAction = function updateUserAction(userData) {\n  return function (dispatch) {\n    return dispatch(updateUser(userData));\n  };\n};","map":{"version":3,"sources":["/Users/work/Documents/Second Quarter/SubmissionKwitter/src/actions/users.js"],"names":["domain","jsonHeaders","handleJsonResponse","GET_USERS","GET_USERS_SUCCESS","GET_USERS_FAIL","GET_USER","GET_USER_SUCCESS","GET_USER_FAIL","GET_USER_PHOTO","GET_USER_PHOTO_SUCCESS","GET_USER_PHOTO_FAIL","CREATE_USER","CREATE_USER_SUCCESS","CREATE_USER_FAIL","UPDATE_USER_PHOTO","UPDATE_USER_PHOTO_SUCCESS","UPDATE_USER_PHOTO_FAIL","UPDATE_USER","UPDATE_USER_SUCCESS","UPDATE_USER_FAIL","DELETE_USER","DELETE_USER_SUCCESS","DELETE_USER_FAIL","url","getUsers","userData","dispatch","type","fetch","then","result","console","log","payload","catch","err","Promise","reject","message","getUser","userId","getUserPhoto","getState","store","auth","login","id","createUser","method","headers","body","JSON","stringify","updateUserPhoto","token","Authorization","form","updateUser","deleteUser","getUsersAction","getUserAction","getUserPhotoAction","createUserAction","deleteUserAction","updateUserPhotoAction","updateUserAction"],"mappings":"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","sourcesContent":["import { domain, jsonHeaders, handleJsonResponse } from \"./constants\";\n\n// action types\nexport const GET_USERS                 = \"GET_USERS\";\nexport const GET_USERS_SUCCESS         = \"GET_USERS_SUCCESS\";\nexport const GET_USERS_FAIL            = \"GET_USERS_FAIL\";\nexport const GET_USER                  = \"GET_USER\";\nexport const GET_USER_SUCCESS          = \"GET_USER_SUCCESS\";\nexport const GET_USER_FAIL             = \"GET_USER_FAIL\";\nexport const GET_USER_PHOTO            = \"GET_USER_PHOTO\";\nexport const GET_USER_PHOTO_SUCCESS    = \"GET_USER_PHOTO_SUCCESS\";\nexport const GET_USER_PHOTO_FAIL       = \"GET_USER_PHOTO_FAIL\";\nexport const CREATE_USER               = \"CREATE_USER\";\nexport const CREATE_USER_SUCCESS       = \"CREATE_USER_SUCCESS\";\nexport const CREATE_USER_FAIL          = \"CREATE_USER_FAIL\";\nexport const UPDATE_USER_PHOTO         = \"UPDATE_USER_PHOTO\";\nexport const UPDATE_USER_PHOTO_SUCCESS = \"UPDATE_USER_PHOTO_SUCCESS\";\nexport const UPDATE_USER_PHOTO_FAIL    = \"UPDATE_USER_PHOTO_FAIL\";\nexport const UPDATE_USER               = \"UPDATE_USER\";\nexport const UPDATE_USER_SUCCESS       = \"UPDATE_USER_SUCCESS\";\nexport const UPDATE_USER_FAIL          = \"UPDATE_USER_FAIL\";\nexport const DELETE_USER               = \"DELETE_USER\";\nexport const DELETE_USER_SUCCESS       = \"DELETE_USER_SUCCESS\";\nexport const DELETE_USER_FAIL          = \"DELETE_USER_FAIL\";\n\n\nconst url = domain + \"/users\";\n\n// action creators\nconst getUsers = (userData = {}) => dispatch => {\n  //userData is an object {limit, offset}\n  dispatch({\n    type: GET_USERS\n  })\n\n  return fetch(url)\n    .then(handleJsonResponse)\n    .then(result => {\n      console.log(result)\n      return dispatch({\n        type: GET_USERS_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: GET_USERS_FAIL, payload: err.message })\n      );\n    });\n  }\n\nconst getUser = userData => dispatch => {\n  //userData is an object {userId:useruserId}\n  dispatch({\n    type: GET_USER\n  });\n  return fetch(url+\"/\"+userData.userId)\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: GET_USER_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: GET_USER_FAIL, payload: err.message })\n      );\n    });\n};\n\nconst getUserPhoto = userData => (dispatch, getState) => {\n  //userData is an object {userId:useruserId}\n  dispatch({\n    type: GET_USER_PHOTO\n  });\n  const store = getState()\n  let userId = store.auth.login && store.auth.login.id || 5\n\n  return fetch(url+`/${userId}/picture`)\n    .then(result => {\n      return dispatch({\n        type: GET_USER_PHOTO_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: GET_USER_PHOTO_FAIL, payload: err.message })\n      );\n    });\n};\n\nconst createUser = userData => dispatch => {\n  console.log(\"CreateUser Action is Triggered\")\n  //userData is an object {username, displayname, password}\n  dispatch({\n    type: CREATE_USER\n  });\n\n  return fetch(url, {\n    method: \"POST\",\n    headers: jsonHeaders,\n    body: JSON.stringify(userData)\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      console.log(result)\n      return dispatch({\n        type: CREATE_USER_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: CREATE_USER_FAIL, payload: err.message })\n      );\n    });\n};\n\nconst updateUserPhoto = userData => (dispatch, getState) => {\n    //userData is an object {userId:useruserId, picture}\n  dispatch({\n    type: UPDATE_USER_PHOTO\n  });\n\n  const userId = getState().auth.login.id\n  const token = getState().auth.login.token\n\n  return fetch(url+`/${userId}/picture`, {\n    method: \"PUT\",\n    headers: {\n      // 'Content-Type': 'multipart/form-data',\n      Authorization: `Bearer ${token}`\n  },\n    body: userData.form\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: UPDATE_USER_PHOTO_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: UPDATE_USER_PHOTO_FAIL, payload: err.message })\n      );\n    });\n};\n\nconst updateUser = userData => dispatch => {\n    //userData is an object {limit, offset}\n  dispatch({\n    type: UPDATE_USER\n  });\n\n  return fetch(url+\"/\"+userData.userId, {\n    method: \"patch\",\n    headers: {...jsonHeaders, Authorization: `Bearer ${userData.token}`},\n    body: JSON.stringify(userData)\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: UPDATE_USER_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: UPDATE_USER_FAIL, payload: err.message })\n      );\n    });\n};\n\nconst deleteUser = userData => dispatch => {\n    //userData is an object {limit, offset}\n  dispatch({\n    type: DELETE_USER\n  });\n\n  return fetch(url + \"/\" + userData.userId, {\n    method: \"DELETE\",\n    headers: {Authorization: `Bearer ${userData.token}`},\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: DELETE_USER_SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: DELETE_USER_FAIL, payload: err.message })\n      );\n    });\n};\n\n\nexport const getUsersAction = userData => dispatch => {\n  return dispatch(getUsers(userData))\n};\nexport const getUserAction = userData => dispatch => {\n  return dispatch(getUser(userData))\n};\nexport const getUserPhotoAction = userData => dispatch => {\n  return dispatch(getUserPhoto(userData))\n};\nexport const createUserAction = userData => dispatch => {\n  return dispatch(createUser(userData))\n};\nexport const deleteUserAction = userData => dispatch => {\n  return dispatch(deleteUser(userData))\n};\nexport const updateUserPhotoAction = userData => dispatch => {\n  return dispatch(updateUserPhoto(userData))\n};\nexport const updateUserAction = userData => dispatch => {\n  return dispatch(updateUser(userData))\n};\n"]},"metadata":{},"sourceType":"module"}